import{P as ye,a as we}from"./PaginationComponent-eXrZuiyu.js";import{d as Pe,c as ke,l as Ae,s as Te,z as xe,F as Ce,a as Me,E as De,r as Se}from"./zh_TW-ct1kIu3F.js";import{r as V,a as le,b as O,c as N,d as $,e as Ne,f as Le,g as Ue,_ as z,o as y,h as P,i as e,j as g,w as Z,k as F,v as H,n as v,l as U,m as q,F as G,p as J,q as Ve,s as M,t as w,u as Oe}from"./index-z2RXVH4T.js";var ne={exports:{}},B={exports:{}};/*!
  * Bootstrap backdrop.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var ee;function $e(){return ee||(ee=1,function(i,t){(function(o,r){i.exports=r(V(),le(),O())})(N,function(o,r,s){const n="backdrop",m="fade",c="show",p=`mousedown.bs.${n}`,_={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},l={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class u extends r{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return _}static get DefaultType(){return l}static get NAME(){return n}show(d){if(!this._config.isVisible){s.execute(d);return}this._append();const E=this._getElement();this._config.isAnimated&&s.reflow(E),E.classList.add(c),this._emulateAnimation(()=>{s.execute(d)})}hide(d){if(!this._config.isVisible){s.execute(d);return}this._getElement().classList.remove(c),this._emulateAnimation(()=>{this.dispose(),s.execute(d)})}dispose(){this._isAppended&&(o.off(this._element,p),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add(m),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=s.getElement(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),o.on(d,p,()=>{s.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){s.executeAfterTransition(d,this._getElement(),this._config.isAnimated)}}return u})}(B)),B.exports}var L={exports:{}};/*!
  * Bootstrap component-functions.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var te;function Ie(){return te||(te=1,function(i,t){(function(o,r){r(t,V(),$(),O())})(N,function(o,r,s,n){const m=(c,p="hide")=>{const _=`click.dismiss${c.EVENT_KEY}`,l=c.NAME;r.on(document,_,`[data-bs-dismiss="${l}"]`,function(u){if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),n.isDisabled(this))return;const a=s.getElementFromSelector(this)||this.closest(`.${l}`);c.getOrCreateInstance(a)[p]()})};o.enableDismissTrigger=m,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})})}(L,L.exports)),L.exports}var R={exports:{}};/*!
  * Bootstrap focustrap.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var se;function Fe(){return se||(se=1,function(i,t){(function(o,r){i.exports=r(V(),$(),le())})(N,function(o,r,s){const n="focustrap",c=".bs.focustrap",p=`focusin${c}`,_=`keydown.tab${c}`,l="Tab",u="forward",a="backward",d={autofocus:!0,trapElement:null},E={autofocus:"boolean",trapElement:"element"};class A extends s{constructor(b){super(),this._config=this._getConfig(b),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return d}static get DefaultType(){return E}static get NAME(){return n}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),o.off(document,c),o.on(document,p,b=>this._handleFocusin(b)),o.on(document,_,b=>this._handleKeydown(b)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,o.off(document,c))}_handleFocusin(b){const{trapElement:x}=this._config;if(b.target===document||b.target===x||x.contains(b.target))return;const D=r.focusableChildren(x);D.length===0?x.focus():this._lastTabNavDirection===a?D[D.length-1].focus():D[0].focus()}_handleKeydown(b){b.key===l&&(this._lastTabNavDirection=b.shiftKey?a:u)}}return A})}(R)),R.exports}var W={exports:{}};/*!
  * Bootstrap scrollbar.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var ie;function qe(){return ie||(ie=1,function(i,t){(function(o,r){i.exports=r(Ne(),$(),O())})(N,function(o,r,s){const n=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",m=".sticky-top",c="padding-right",p="margin-right";class _{constructor(){this._element=document.body}getWidth(){const u=document.documentElement.clientWidth;return Math.abs(window.innerWidth-u)}hide(){const u=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,c,a=>a+u),this._setElementAttributes(n,c,a=>a+u),this._setElementAttributes(m,p,a=>a-u)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,c),this._resetElementAttributes(n,c),this._resetElementAttributes(m,p)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(u,a,d){const E=this.getWidth(),A=T=>{if(T!==this._element&&window.innerWidth>T.clientWidth+E)return;this._saveInitialAttribute(T,a);const b=window.getComputedStyle(T).getPropertyValue(a);T.style.setProperty(a,`${d(Number.parseFloat(b))}px`)};this._applyManipulationCallback(u,A)}_saveInitialAttribute(u,a){const d=u.style.getPropertyValue(a);d&&o.setDataAttribute(u,a,d)}_resetElementAttributes(u,a){const d=E=>{const A=o.getDataAttribute(E,a);if(A===null){E.style.removeProperty(a);return}o.removeDataAttribute(E,a),E.style.setProperty(a,A)};this._applyManipulationCallback(u,d)}_applyManipulationCallback(u,a){if(s.isElement(u)){a(u);return}for(const d of r.find(u,this._element))a(d)}}return _})}(W)),W.exports}/*!
  * Bootstrap modal.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(i,t){(function(o,r){i.exports=r(Le(),V(),$(),$e(),Ie(),Fe(),O(),qe())})(N,function(o,r,s,n,m,c,p,_){const l="modal",a=".bs.modal",d=".data-api",E="Escape",A=`hide${a}`,T=`hidePrevented${a}`,b=`hidden${a}`,x=`show${a}`,D=`shown${a}`,re=`resize${a}`,de=`click.dismiss${a}`,ce=`mousedown.dismiss${a}`,ue=`keydown.dismiss${a}`,me=`click${a}${d}`,Q="modal-open",he="fade",X="show",I="modal-static",_e=".modal.show",ge=".modal-dialog",pe=".modal-body",fe='[data-bs-toggle="modal"]',be={backdrop:!0,focus:!0,keyboard:!0},ve={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class C extends o{constructor(h,f){super(h,f),this._dialog=s.findOne(ge,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new _,this._addEventListeners()}static get Default(){return be}static get DefaultType(){return ve}static get NAME(){return l}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||r.trigger(this._element,x,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Q),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){!this._isShown||this._isTransitioning||r.trigger(this._element,A).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(X),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){r.off(window,a),r.off(this._dialog,a),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new n({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new c({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const f=s.findOne(pe,this._dialog);f&&(f.scrollTop=0),p.reflow(this._element),this._element.classList.add(X);const k=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,r.trigger(this._element,D,{relatedTarget:h})};this._queueCallback(k,this._dialog,this._isAnimated())}_addEventListeners(){r.on(this._element,ue,h=>{if(h.key===E){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),r.on(window,re,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),r.on(this._element,ce,h=>{r.one(this._element,de,f=>{if(!(this._element!==h.target||this._element!==f.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Q),this._resetAdjustments(),this._scrollBar.reset(),r.trigger(this._element,b)})}_isAnimated(){return this._element.classList.contains(he)}_triggerBackdropTransition(){if(r.trigger(this._element,T).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,k=this._element.style.overflowY;k==="hidden"||this._element.classList.contains(I)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(I),this._queueCallback(()=>{this._element.classList.remove(I),this._queueCallback(()=>{this._element.style.overflowY=k},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,f=this._scrollBar.getWidth(),k=f>0;if(k&&!h){const S=p.isRTL()?"paddingLeft":"paddingRight";this._element.style[S]=`${f}px`}if(!k&&h){const S=p.isRTL()?"paddingRight":"paddingLeft";this._element.style[S]=`${f}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,f){return this.each(function(){const k=C.getOrCreateInstance(this,h);if(typeof h=="string"){if(typeof k[h]>"u")throw new TypeError(`No method named "${h}"`);k[h](f)}})}}return r.on(document,me,fe,function(Ee){const h=s.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&Ee.preventDefault(),r.one(h,x,S=>{S.defaultPrevented||r.one(h,b,()=>{p.isVisible(this)&&this.focus()})});const f=s.findOne(_e);f&&C.getInstance(f).hide(),C.getOrCreateInstance(h).toggle(this)}),m.enableDismissTrigger(C),p.defineJQueryPlugin(C),C})})(ne);var Be=ne.exports;const Re=Ue(Be),ae={methods:{showModal(){const i=new Re(this.$refs.modal,{keyboard:!1});this.modal=i,this.modal.show()},hideModal(){this.tempProduct={},this.imageUrl="",this.disabled=!1,this.fileData="",this.$emit("emit-hideModal"),this.modal.hide()}}},Y="https://ec-course-api.hexschool.io/",K="bftsai";Pe("required",Se);ke({validateOnInput:!0,generateMessage:Ae({zhTW:xe})});Te("zhTW");const We={data(){return{tempProduct:{},imageUrl:"",disabled:!1,fileData:""}},mixins:[ae],props:{productModal:{typeof:Object,default(){return{}}}},components:{VForm:Ce,VField:Me,ErrorMessage:De},watch:{imageUrl(){this.imageUrl?this.disabled=!0:this.disabled=!1},productModal(){this.tempProduct={...this.productModal}}},methods:{throttle(i){let t,o;return(...r)=>{o=r,!t&&(i(o),o=null,t=setTimeout(()=>{t=null,o&&(i(o),o=null)},1e3))}},onSubmit(){this.tempProduct.imageUrl&&(this.disabled?this.tempProduct.is_enabled=0:this.tempProduct.is_enabled=1,this.tempProduct.id?this.putProduct({data:this.tempProduct}):this.postProduct({data:this.tempProduct}))},async postProduct(i){try{this.$emit("emit-toggleLoading");const t=(await this.axios.post(`${Y}v2/api/${K}/admin/product`,i)).data;if(this.$emit("emit-toggleLoading"),t.success){const o={icon:"success",title:t.message,timer:1500};this.$swal(o),this.hideModal(),this.$emit("emit-getProducts")}else{const o={icon:"error",title:t.message};this.$swal(o)}}catch{}},async putProduct(i){try{this.$emit("emit-toggleLoading");const t=await this.axios.put(`${Y}/v2/api/${K}/admin/product/${this.tempProduct.id}`,i);if(this.$emit("emit-toggleLoading"),t.data.success){const o={icon:"success",title:t.data.message,timer:1500};this.$swal(o),this.hideModal(),this.tempProduct={},this.$emit("emit-getProducts")}else{const o={icon:"error",title:t.data.message};this.$swal(o)}}catch{}},async loadFile(i){try{const t=i.target.files[0],o=new FormData;o.append("file-to-upload",t);const r=await this.axios.post(`${Y}/v2/api/${K}/admin/upload`,o);this.imageUrl=r.data.imageUrl}catch{}},deleteImageUrl(){this.imageUrl="",this.fileData=""},deleteTempImage(i){if(i.target.previousElementSibling.alt.includes("imageUrl"))this.tempProduct.imageUrl="";else{const t=Number(i.target.previousElementSibling.alt.split("imagesUrl")[1]);this.tempProduct.imagesUrl.splice(t,1)}},addProductImage(){this.imageUrl&&(this.tempProduct.imageUrl?this.tempProduct.imagesUrl.push(this.imageUrl):this.tempProduct.imageUrl=this.imageUrl,this.imageUrl="")}}},Ye={class:"modal fade",id:"exampleModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Ke={class:"modal-dialog modal-xl"},je={class:"modal-header"},ze=e("h5",{class:"modal-title fs-5",id:"exampleModalLabel"},"Edit Product",-1),Ge={class:"modal-body"},Je={class:"row"},Qe={class:"col-4"},Xe={class:"row"},Ze={class:"col-12 mb-3 d-flex flex-column"},He=e("span",{class:"invalid-feedback",name:"imageUrl"},"請輸入主圖照片",-1),et=["disabled"],tt={key:0,class:"col-12 mb-3 position-relative"},st=["src"],it=e("span",{class:"visually-hidden"},"unread messages",-1),ot={class:"row"},lt={key:0,class:"col-6 position-relative mb-3"},nt=["src"],at=e("span",{class:"visually-hidden"},"unread messages",-1),rt=["src","alt"],dt=e("span",{class:"visually-hidden"},"unread messages",-1),ct={class:"col-8"},ut={class:"mb-3 d-flex align-items-center"},mt=e("label",{for:"title",class:"form-label"},"Title：",-1),ht={class:"w-100 d-flex flex-column"},_t={class:"row"},gt={class:"col-6"},pt={class:"mb-3 d-flex align-items-center"},ft=e("label",{for:"category",class:"form-label"},"Category：",-1),bt={class:"w-100 d-flex flex-column"},vt={class:"col-6"},Et={class:"mb-3 d-flex align-items-center"},yt=e("label",{for:"unit",class:"form-label"},"Unit：",-1),wt={class:"w-100 d-flex flex-column"},Pt={class:"row"},kt={class:"col-6"},At={class:"mb-3 d-flex align-items-center"},Tt=e("label",{for:"origin_price",class:"form-label"},"Origin_price：",-1),xt={class:"w-100 d-flex flex-column"},Ct={class:"col-6"},Mt={class:"mb-3 d-flex align-items-center"},Dt=e("label",{for:"price",class:"form-label"},"Price：",-1),St={class:"w-100 d-flex flex-column"},Nt={class:"mb-3 d-flex align-items-center"},Lt=e("label",{for:"num",class:"form-label"},"Number：",-1),Ut={class:"w-100 d-flex flex-column"},Vt={class:"mb-3 d-flex align-items-center"},Ot=e("label",{for:"content",class:"form-label"},"Content：",-1),$t={class:"w-100 d-flex flex-column"},It={class:"mb-3"},Ft=e("label",{for:"description",class:"form-label"},"Description：",-1),qt={class:"w-100"},Bt={class:"mb-3 d-flex align-items-center"},Rt=["checked"],Wt=e("label",{for:"is_enabled",class:"form-check-label"},"啟用",-1),Yt={class:"modal-footer"},Kt=e("button",{type:"submit",class:"btn btn-primary"},"Save changes",-1);function jt(i,t,o,r,s,n){const m=M("v-field"),c=M("error-message"),p=M("v-form");return y(),P("div",Ye,[e("div",Ke,[g(p,{class:"modal-content",onSubmit:n.onSubmit},{default:Z(({errors:_})=>[e("div",je,[ze,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...l)=>i.hideModal&&i.hideModal(...l))})]),e("div",Ge,[e("div",Je,[e("div",Qe,[e("div",Xe,[e("div",Ze,[s.imageUrl?U("",!0):F((y(),P("input",{key:0,type:"text",placeholder:"請輸入圖片網址",name:"imageUrl",class:v(["form-control",{"is-invalid":!s.tempProduct.imageUrl}]),"onUpdate:modelValue":t[1]||(t[1]=l=>s.imageUrl=l)},null,2)),[[H,s.imageUrl]]),He,e("input",{type:"file",disabled:s.disabled,onChange:t[2]||(t[2]=(...l)=>n.loadFile&&n.loadFile(...l))},null,40,et),e("button",{type:"button",class:"btn btn-primary me-3",onClick:t[3]||(t[3]=(...l)=>n.addProductImage&&n.addProductImage(...l))},"新增")]),s.imageUrl?(y(),P("div",tt,[e("img",{src:s.imageUrl,alt:"edit product pic",class:"object-fit-cover w-100"},null,8,st),e("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:t[4]||(t[4]=(...l)=>n.deleteImageUrl&&n.deleteImageUrl(...l))},[q(" - "),it])])):U("",!0)]),e("div",ot,[s.tempProduct.imageUrl?(y(),P("div",lt,[e("img",{src:s.tempProduct.imageUrl,alt:"'imageUrl'",class:"object-fit-cover w-100"},null,8,nt),e("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:t[5]||(t[5]=(...l)=>n.deleteTempImage&&n.deleteTempImage(...l))},[q(" - "),at])])):U("",!0),(y(!0),P(G,null,J(s.tempProduct.imagesUrl,(l,u)=>(y(),P("div",{class:"col-6 position-relative mb-3",key:"key"+u},[e("img",{src:l,alt:"imagesUrl"+u,class:"object-fit-cover w-100"},null,8,rt),e("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:t[6]||(t[6]=(...a)=>n.deleteTempImage&&n.deleteTempImage(...a))},[q(" - "),dt])]))),128))])]),e("div",ct,[e("div",ut,[mt,e("div",ht,[g(m,{type:"text",id:"title",class:v(["form-control",{"is-invalid":_.Title}]),name:"Title",modelValue:s.tempProduct.title,"onUpdate:modelValue":t[7]||(t[7]=l=>s.tempProduct.title=l),rules:"required"},null,8,["class","modelValue"]),g(c,{class:"invalid-feedback",name:"Title"})])]),e("div",_t,[e("div",gt,[e("div",pt,[ft,e("div",bt,[g(m,{type:"text",id:"category",class:v(["form-control",{"is-invalid":_.Category}]),name:"Category",modelValue:s.tempProduct.category,"onUpdate:modelValue":t[8]||(t[8]=l=>s.tempProduct.category=l),rules:"required"},null,8,["class","modelValue"]),g(c,{class:"invalid-feedback",name:"Category"})])])]),e("div",vt,[e("div",Et,[yt,e("div",wt,[g(m,{type:"text",id:"unit",class:v(["form-control",{"is-invalid":_.Unit}]),name:"Unit",modelValue:s.tempProduct.unit,"onUpdate:modelValue":t[9]||(t[9]=l=>s.tempProduct.unit=l),rules:"required"},null,8,["class","modelValue"]),g(c,{class:"invalid-feedback",name:"Unit"})])])])]),e("div",Pt,[e("div",kt,[e("div",At,[Tt,e("div",xt,[g(m,{type:"number",id:"origin_price",class:v(["form-control",{"is-invalid":_.Origin_price}]),name:"Origin_price",modelValue:s.tempProduct.origin_price,"onUpdate:modelValue":t[10]||(t[10]=l=>s.tempProduct.origin_price=l),rules:"required"},null,8,["class","modelValue"]),g(c,{class:"invalid-feedback",name:"Origin_price"})])])]),e("div",Ct,[e("div",Mt,[Dt,e("div",St,[g(m,{type:"number",id:"price",class:v(["form-control",{"is-invalid":_.Price}]),name:"Price",modelValue:s.tempProduct.price,"onUpdate:modelValue":t[11]||(t[11]=l=>s.tempProduct.price=l),rules:"required"},null,8,["class","modelValue"]),g(c,{class:"invalid-feedback",name:"Price"})])])])]),e("div",Nt,[Lt,e("div",Ut,[g(m,{type:"number",id:"num",class:v(["form-control",{"is-invalid":_.Number}]),name:"Number",modelValue:s.tempProduct.num,"onUpdate:modelValue":t[12]||(t[12]=l=>s.tempProduct.num=l),rules:"required"},null,8,["class","modelValue"]),g(c,{class:"invalid-feedback",name:"Number"})])]),e("div",Vt,[Ot,e("div",$t,[g(m,{type:"text",id:"content",class:v(["form-control",{"is-invalid":_.Content}]),name:"Content",modelValue:s.tempProduct.content,"onUpdate:modelValue":t[13]||(t[13]=l=>s.tempProduct.content=l),rules:"required"},null,8,["class","modelValue"]),g(c,{class:"invalid-feedback",name:"Content"})])]),e("div",It,[Ft,e("div",qt,[g(m,{name:"Description",rules:"required",modelValue:s.tempProduct.description,"onUpdate:modelValue":t[15]||(t[15]=l=>s.tempProduct.description=l)},{default:Z(()=>[F(e("textarea",{name:"Description",class:v(["w-100",{"is-invalid":_.Description}]),id:"description",cols:"30",rows:"3",placeholder:"請輸入產品描述","onUpdate:modelValue":t[14]||(t[14]=l=>s.tempProduct.description=l)},null,2),[[H,s.tempProduct.description]]),g(c,{name:"Description",class:"invalid-feedback"})]),_:2},1032,["modelValue"])])]),e("div",Bt,[F(e("input",{type:"checkbox",id:"is_enabled",class:"form-check-input me-2",checked:s.tempProduct.is_enabled,"onUpdate:modelValue":t[16]||(t[16]=l=>s.tempProduct.is_enabled=l)},null,8,Rt),[[Ve,s.tempProduct.is_enabled]]),Wt])])])]),e("div",Yt,[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[17]||(t[17]=(...l)=>i.hideModal&&i.hideModal(...l))},"Close"),Kt])]),_:1},8,["onSubmit"])])],512)}const zt=z(We,[["render",jt]]),Gt="https://ec-course-api.hexschool.io/",Jt="bftsai",Qt={data(){return{tempProduct:{}}},props:{deleteModal:{typeof:Object,default(){return{}}}},mixins:[ae],watch:{deleteModal(){this.tempProduct={...this.deleteModal}}},methods:{async deleteProduct(){try{const{id:i}=this.tempProduct;this.$emit("emit-toggleLoading");const t=(await this.axios.delete(`${Gt}/v2/api/${Jt}/admin/product/${i}`)).data;if(this.$emit("emit-toggleLoading"),t.success){const o={icon:"success",title:t.message,timer:1500};this.$swal(o),this.hideModal(),this.tempProduct={},this.$emit("emit-getProducts")}else{const o={icon:"error",title:t.message};this.$swal(o)}}catch(i){console.log(i)}}}},Xt={class:"modal fade",id:"exampleModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Zt={class:"modal-dialog modal-xl"},Ht={class:"modal-content"},es={class:"modal-header"},ts=e("h5",{class:"modal-title fs-5",id:"exampleModalLabel"},"Delete Product",-1),ss={class:"modal-body"},is={class:"row"},os={class:"col-4"},ls={class:"row"},ns={class:"col-12 mb-3 d-flex flex-wrap justify-content-between"},as=["src"],rs=["src"],ds={class:"col-8"},cs={class:"mb-3 d-flex align-items-center"},us={class:"row"},ms={class:"col-6"},hs={class:"mb-3 d-flex align-items-center"},_s={class:"col-6"},gs={class:"mb-3 d-flex align-items-center"},ps={class:"row"},fs={class:"col-6"},bs={class:"mb-3 d-flex align-items-center"},vs={class:"col-6"},Es={class:"mb-3 d-flex align-items-center"},ys={class:"mb-3 d-flex align-items-center"},ws={class:"mb-3"},Ps={class:"w-100"},ks={class:"mb-3 d-flex align-items-center"},As={class:"modal-footer"};function Ts(i,t,o,r,s,n){return y(),P("div",Xt,[e("div",Zt,[e("div",Ht,[e("div",es,[ts,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...m)=>i.hideModal&&i.hideModal(...m))})]),e("div",ss,[e("div",is,[e("div",os,[e("div",ls,[e("div",ns,[e("img",{class:"object-fit-cover w-50 mb-3",src:s.tempProduct.imageUrl,alt:"imageUrl"},null,8,as),(y(!0),P(G,null,J(s.tempProduct.imagesUrl,(m,c)=>(y(),P("img",{class:"object-fit-cover w-50 mb-3",src:m,alt:"'imagesUrl' + key",key:"imagesUrl"+c},null,8,rs))),128))])])]),e("div",ds,[e("div",cs,[e("p",null,"Title："+w(s.tempProduct.title),1)]),e("div",us,[e("div",ms,[e("div",hs,[e("p",null,"Category："+w(s.tempProduct.category),1)])]),e("div",_s,[e("div",gs,[e("p",null,"Unit："+w(s.tempProduct.unit),1)])])]),e("div",ps,[e("div",fs,[e("div",bs,[e("p",null,"origin_price："+w(s.tempProduct.origin_price),1)])]),e("div",vs,[e("div",Es,[e("p",null,"Price："+w(s.tempProduct.price),1)])])]),e("div",ys,[e("p",null,"Content："+w(s.tempProduct.content),1)]),e("div",ws,[e("div",Ps,[e("p",null,"Description："+w(s.tempProduct.description),1)])]),e("div",ks,[e("p",{class:v(["text-success",{"text-danger":!s.tempProduct.is_enabled}])},w(s.tempProduct.is_enabled?"啟用":"未啟用"),3)])])])]),e("div",As,[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...m)=>i.hideModal&&i.hideModal(...m))},"Close"),e("button",{type:"submit",class:"btn btn-outline-danger",onClick:t[2]||(t[2]=(...m)=>n.deleteProduct&&n.deleteProduct(...m))},"Delete Product")])])])],512)}const xs=z(Qt,[["render",Ts]]),j="https://ec-course-api.hexschool.io/",oe="bftsai",Cs={data(){return{products:[],paginationObj:{},itemSelect:{},productsNum:0}},components:{ProductCard:ye,pagination:we,productModal:zt,deleteModal:xs},props:["defaultTheme"],emits:["emit-login","emit-toggleLogin","emit-toggleLoading"],methods:{textDanger(i){return!i&&this.defaultTheme==="light"},textLight(i){return!i&&this.defaultTheme==="dark"},async getAllProducts(){try{const i=(await this.axios.get(`${j}v2/api/${oe}/admin/products/all`)).data.products;this.productsNum=Object.keys(i)}catch{}},async getProducts(i=1){try{this.itemSelect={},this.product=[],this.$emit("emit-toggleLoading");const t=(await this.axios.get(`${j}v2/api/${oe}/admin/products?page=${i}`)).data;this.products=t.products,this.paginationObj=t.pagination,this.$emit("emit-toggleLoading");const o={icon:"success",title:"已取得產品資料",timer:1500};this.$swal(o)}catch(t){this.$emit("emit-toggleLoading");const o={icon:"error",title:t.response.data.message};this.$swal(o)}},checkProduct(i){this.itemSelect=JSON.parse(JSON.stringify(i))},async checkLogin(){try{this.$emit("emit-toggleLoading");const i=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=i;const t=(await this.axios.post(`${j}v2/api/user/check`)).data;this.$emit("emit-toggleLoading"),t.success&&(this.$emit("emit-toggleLogin",t.success),this.getProducts(1))}catch(i){this.$emit("emit-toggleLoading"),this.$emit("emit-toggleLogin",i.response.data.success);const t={icon:"error",title:i.response.data.message,timer:1500};this.$swal(t),i.response.data.success||this.$router.push("login")}},selectPage(i){this.getProducts(i)},productModal(i){i.id?this.itemSelect={...i}:this.itemSelect={imagesUrl:[]},this.$refs.productModal.showModal()},deleteProduct(i){this.itemSelect={...i},this.$refs.deleteModal.showModal()},hideModal(){this.itemSelect={}},toggleLoading(){this.$emit("emit-toggleLoading")}},mounted(){this.$emit("emit-login"),this.checkLogin(),this.getAllProducts()}},Ms={class:"container"},Ds={class:"row"},Ss={class:"col-lg-8"},Ns=e("h1",null,"Products List",-1),Ls={class:"table table-hover"},Us=e("thead",null,[e("tr",{class:"text-center"},[e("th",{class:"w-50",scope:"col"},"產品名稱"),e("th",{scope:"col"},"原價"),e("th",{scope:"col"},"售價"),e("th",{scope:"col"},"是否啟用"),e("th",{scope:"col"},"查看細節"),e("th",{scope:"col"},"編輯")])],-1),Vs={class:"w-50 text-start"},Os=["onClick"],$s={colspan:"2"},Is=["onClick"],Fs=["onClick"];function qs(i,t,o,r,s,n){const m=M("productModal"),c=M("deleteModal"),p=M("pagination"),_=M("ProductCard");return y(),P("div",Ms,[e("div",Ds,[e("div",Ss,[g(m,{ref:"productModal","product-modal":s.itemSelect,"emit-hide-modal":n.hideModal,onEmitGetProducts:n.getProducts,onEmitToggleLoading:n.toggleLoading},null,8,["product-modal","emit-hide-modal","onEmitGetProducts","onEmitToggleLoading"]),g(c,{ref:"deleteModal","delete-modal":s.itemSelect,onEmitHideModal:n.hideModal,onEmitGetProducts:n.getProducts,onEmitToggleLoading:n.toggleLoading},null,8,["delete-modal","onEmitHideModal","onEmitGetProducts","onEmitToggleLoading"]),Ns,e("button",{class:v(["btn d-block ms-auto",{"btn-secondary":o.defaultTheme==="light","btn-outline-primary":o.defaultTheme==="dark"}]),onClick:t[0]||(t[0]=(...l)=>n.productModal&&n.productModal(...l))},"建立新產品",2),e("table",Ls,[Us,e("tbody",null,[(y(!0),P(G,null,J(s.products,l=>(y(),P("tr",{key:l.title,class:"text-center"},[e("td",Vs,w(l.title),1),e("td",null,w(l.origin_price),1),e("td",null,w(l.price),1),e("td",{class:v({"text-danger":n.textDanger(l.is_enabled),"text-light":n.textLight(l.is_enabled)})},w(l.is_enabled?"啟用":"未啟用"),3),e("td",null,[e("button",{type:"button",class:v(["btn w-100 p-1",{"btn-secondary":o.defaultTheme==="light","btn-outline-primary":o.defaultTheme==="dark"}]),onClick:u=>n.checkProduct(l)},"查看細節",10,Os)]),e("td",$s,[e("button",{type:"button",class:v(["btn p-1 me-3",{"btn-secondary":o.defaultTheme==="light","btn-outline-primary":o.defaultTheme==="dark"}]),onClick:u=>n.productModal(l)},"編輯",10,Is),e("button",{type:"button",class:v(["btn p-1 btn-outline-danger",{"text-primary":o.defaultTheme==="dark"}]),onClick:u=>n.deleteProduct(l)},"刪除",10,Fs)])]))),128))])]),g(p,{"pagination-obj":s.paginationObj,onEmitSelectPage:n.selectPage},null,8,["pagination-obj","onEmitSelectPage"])]),s.itemSelect.id?(y(),Oe(_,{key:0,"item-select":s.itemSelect,"default-theme":o.defaultTheme},null,8,["item-select","default-theme"])):U("",!0)])])}const Ys=z(Cs,[["render",qs]]);export{Ys as default};
