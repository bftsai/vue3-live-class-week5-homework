import{_ as L,o as v,c as y,a as e,b as D,t as b,n as _,F as U,r as O,d as F,e as le,f as q,g as V,h as B,i as ye,j as Pe,k as we,l as f,w as Z,m as j,v as H,p as I,q as xe,s as M,u as ke}from"./index-NgsiCtId.js";import{d as Te,c as Ae,l as Ce,s as Me,z as Se,F as De,a as Ne,E as Le,r as Ue}from"./zh_TW-fp4ksQRG.js";const Oe={props:["itemSelect","defaultTheme"]},Ve={class:"col-lg-4"},$e=e("h2",null,"Product",-1),Ie=["src","alt"],Fe={class:"card-body"},qe={class:"card-title"},Be={class:"card-text"},Re={class:"card-text"},je={class:"card-text"},We={class:"d-flex flex-wrap mb-3"},Ye=["src","alt"];function Ke(o,t,s,a,i,n){return v(),y("div",Ve,[$e,e("div",{class:_(["card mb-3",{"border-primary":s.defaultTheme==="dark"}])},[e("img",{src:s.itemSelect.imageUrl,class:"card-img-top object-fit-contain",alt:s.itemSelect.title,height:"400"},null,8,Ie),e("div",Fe,[e("h5",qe,[D(b(s.itemSelect.title),1),e("span",{class:_(["badge ms-3",{" text-bg-secondary":s.defaultTheme==="light","text-bg-primary":s.defaultTheme==="dark"}])},b(s.itemSelect.category),3)]),e("p",Be,"商品內容："+b(s.itemSelect.content),1),e("p",Re,"商品描述："+b(s.itemSelect.description),1),e("p",je,[D(b(s.itemSelect.price)+" ",1),e("span",{class:_(["line-through",{"text-light":s.defaultTheme==="dark"}])},b(s.itemSelect.origin_price),3),D("元 / 個")])])],2),e("div",We,[(v(!0),y(U,null,O(s.itemSelect.imagesUrl,(d,r)=>(v(),y("img",{src:d,alt:"小圖"+r,key:"小圖"+r,height:"200",class:"me-3 mb-3"},null,8,Ye))),128))])])}const ze=L(Oe,[["render",Ke]]),Ge={props:["paginationObj"],methods:{changePage(o){o.target.textContent==="Next"?this.$emit("emit-selectPage",this.paginationObj.current_page+1):o.target.textContent==="Previous"?this.$emit("emit-selectPage",this.paginationObj.current_page-1):o.target.closest("li").className.includes("active")||this.$emit("emit-selectPage",o.target.textContent)}}},Je={class:"pagination justify-content-center"};function Qe(o,t,s,a,i,n){return v(),y("nav",null,[e("ul",Je,[e("li",{class:_(["page-item",{disabled:!s.paginationObj.has_pre}])},[e("a",{class:_(["page-link",{"text-dark":!s.paginationObj.has_pre}]),onClick:t[0]||(t[0]=(...d)=>n.changePage&&n.changePage(...d))},"Previous",2)],2),(v(!0),y(U,null,O(s.paginationObj.total_pages,(d,r)=>(v(),y("li",{class:_(["page-item",{active:s.paginationObj.current_page===r+1}]),key:"key"+r},[e("a",{class:_(["page-link",{"text-dark":s.paginationObj.current_page===r+1}]),onClick:t[1]||(t[1]=(...g)=>n.changePage&&n.changePage(...g))},b(r+1),3)],2))),128)),e("li",{class:_(["page-item",{disabled:!s.paginationObj.has_next}])},[e("a",{class:_(["page-link",{"text-dark":!s.paginationObj.has_next}]),onClick:t[2]||(t[2]=(...d)=>n.changePage&&n.changePage(...d))},"Next",2)],2)])])}const Xe=L(Ge,[["render",Qe]]);var ne={exports:{}},W={exports:{}};/*!
  * Bootstrap backdrop.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var ee;function Ze(){return ee||(ee=1,function(o,t){(function(s,a){o.exports=a(F(),le(),q())})(V,function(s,a,i){const n="backdrop",d="fade",r="show",g=`mousedown.bs.${n}`,p={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},l={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class u extends a{constructor(m){super(),this._config=this._getConfig(m),this._isAppended=!1,this._element=null}static get Default(){return p}static get DefaultType(){return l}static get NAME(){return n}show(m){if(!this._config.isVisible){i.execute(m);return}this._append();const w=this._getElement();this._config.isAnimated&&i.reflow(w),w.classList.add(r),this._emulateAnimation(()=>{i.execute(m)})}hide(m){if(!this._config.isVisible){i.execute(m);return}this._getElement().classList.remove(r),this._emulateAnimation(()=>{this.dispose(),i.execute(m)})}dispose(){this._isAppended&&(s.off(this._element,g),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const m=document.createElement("div");m.className=this._config.className,this._config.isAnimated&&m.classList.add(d),this._element=m}return this._element}_configAfterMerge(m){return m.rootElement=i.getElement(m.rootElement),m}_append(){if(this._isAppended)return;const m=this._getElement();this._config.rootElement.append(m),s.on(m,g,()=>{i.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(m){i.executeAfterTransition(m,this._getElement(),this._config.isAnimated)}}return u})}(W)),W.exports}var $={exports:{}};/*!
  * Bootstrap component-functions.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var te;function He(){return te||(te=1,function(o,t){(function(s,a){a(t,F(),B(),q())})(V,function(s,a,i,n){const d=(r,g="hide")=>{const p=`click.dismiss${r.EVENT_KEY}`,l=r.NAME;a.on(document,p,`[data-bs-dismiss="${l}"]`,function(u){if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),n.isDisabled(this))return;const c=i.getElementFromSelector(this)||this.closest(`.${l}`);r.getOrCreateInstance(c)[g]()})};s.enableDismissTrigger=d,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})})}($,$.exports)),$.exports}var Y={exports:{}};/*!
  * Bootstrap focustrap.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var se;function et(){return se||(se=1,function(o,t){(function(s,a){o.exports=a(F(),B(),le())})(V,function(s,a,i){const n="focustrap",r=".bs.focustrap",g=`focusin${r}`,p=`keydown.tab${r}`,l="Tab",u="forward",c="backward",m={autofocus:!0,trapElement:null},w={autofocus:"boolean",trapElement:"element"};class k extends i{constructor(P){super(),this._config=this._getConfig(P),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return m}static get DefaultType(){return w}static get NAME(){return n}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),s.off(document,r),s.on(document,g,P=>this._handleFocusin(P)),s.on(document,p,P=>this._handleKeydown(P)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,s.off(document,r))}_handleFocusin(P){const{trapElement:A}=this._config;if(P.target===document||P.target===A||A.contains(P.target))return;const S=a.focusableChildren(A);S.length===0?A.focus():this._lastTabNavDirection===c?S[S.length-1].focus():S[0].focus()}_handleKeydown(P){P.key===l&&(this._lastTabNavDirection=P.shiftKey?c:u)}}return k})}(Y)),Y.exports}var K={exports:{}};/*!
  * Bootstrap scrollbar.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var ie;function tt(){return ie||(ie=1,function(o,t){(function(s,a){o.exports=a(ye(),B(),q())})(V,function(s,a,i){const n=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",d=".sticky-top",r="padding-right",g="margin-right";class p{constructor(){this._element=document.body}getWidth(){const u=document.documentElement.clientWidth;return Math.abs(window.innerWidth-u)}hide(){const u=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,r,c=>c+u),this._setElementAttributes(n,r,c=>c+u),this._setElementAttributes(d,g,c=>c-u)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,r),this._resetElementAttributes(n,r),this._resetElementAttributes(d,g)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(u,c,m){const w=this.getWidth(),k=T=>{if(T!==this._element&&window.innerWidth>T.clientWidth+w)return;this._saveInitialAttribute(T,c);const P=window.getComputedStyle(T).getPropertyValue(c);T.style.setProperty(c,`${m(Number.parseFloat(P))}px`)};this._applyManipulationCallback(u,k)}_saveInitialAttribute(u,c){const m=u.style.getPropertyValue(c);m&&s.setDataAttribute(u,c,m)}_resetElementAttributes(u,c){const m=w=>{const k=s.getDataAttribute(w,c);if(k===null){w.style.removeProperty(c);return}s.removeDataAttribute(w,c),w.style.setProperty(c,k)};this._applyManipulationCallback(u,m)}_applyManipulationCallback(u,c){if(i.isElement(u)){c(u);return}for(const m of a.find(u,this._element))c(m)}}return p})}(K)),K.exports}/*!
  * Bootstrap modal.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(o,t){(function(s,a){o.exports=a(Pe(),F(),B(),Ze(),He(),et(),q(),tt())})(V,function(s,a,i,n,d,r,g,p){const l="modal",c=".bs.modal",m=".data-api",w="Escape",k=`hide${c}`,T=`hidePrevented${c}`,P=`hidden${c}`,A=`show${c}`,S=`shown${c}`,ce=`resize${c}`,re=`click.dismiss${c}`,de=`mousedown.dismiss${c}`,me=`keydown.dismiss${c}`,ue=`click${c}${m}`,Q="modal-open",he="fade",X="show",R="modal-static",_e=".modal.show",ge=".modal-dialog",pe=".modal-body",fe='[data-bs-toggle="modal"]',be={backdrop:!0,focus:!0,keyboard:!0},ve={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class C extends s{constructor(h,E){super(h,E),this._dialog=i.findOne(ge,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new p,this._addEventListeners()}static get Default(){return be}static get DefaultType(){return ve}static get NAME(){return l}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||a.trigger(this._element,A,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Q),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){!this._isShown||this._isTransitioning||a.trigger(this._element,k).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(X),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){a.off(window,c),a.off(this._dialog,c),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new n({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new r({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const E=i.findOne(pe,this._dialog);E&&(E.scrollTop=0),g.reflow(this._element),this._element.classList.add(X);const x=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,a.trigger(this._element,S,{relatedTarget:h})};this._queueCallback(x,this._dialog,this._isAnimated())}_addEventListeners(){a.on(this._element,me,h=>{if(h.key===w){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),a.on(window,ce,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),a.on(this._element,de,h=>{a.one(this._element,re,E=>{if(!(this._element!==h.target||this._element!==E.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Q),this._resetAdjustments(),this._scrollBar.reset(),a.trigger(this._element,P)})}_isAnimated(){return this._element.classList.contains(he)}_triggerBackdropTransition(){if(a.trigger(this._element,T).defaultPrevented)return;const E=this._element.scrollHeight>document.documentElement.clientHeight,x=this._element.style.overflowY;x==="hidden"||this._element.classList.contains(R)||(E||(this._element.style.overflowY="hidden"),this._element.classList.add(R),this._queueCallback(()=>{this._element.classList.remove(R),this._queueCallback(()=>{this._element.style.overflowY=x},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,E=this._scrollBar.getWidth(),x=E>0;if(x&&!h){const N=g.isRTL()?"paddingLeft":"paddingRight";this._element.style[N]=`${E}px`}if(!x&&h){const N=g.isRTL()?"paddingRight":"paddingLeft";this._element.style[N]=`${E}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,E){return this.each(function(){const x=C.getOrCreateInstance(this,h);if(typeof h=="string"){if(typeof x[h]>"u")throw new TypeError(`No method named "${h}"`);x[h](E)}})}}return a.on(document,ue,fe,function(Ee){const h=i.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&Ee.preventDefault(),a.one(h,A,N=>{N.defaultPrevented||a.one(h,P,()=>{g.isVisible(this)&&this.focus()})});const E=i.findOne(_e);E&&C.getInstance(E).hide(),C.getOrCreateInstance(h).toggle(this)}),d.enableDismissTrigger(C),g.defineJQueryPlugin(C),C})})(ne);var st=ne.exports;const it=we(st),ae={methods:{showModal(){const o=new it(this.$refs.modal,{keyboard:!1});this.modal=o,this.modal.show()},hideModal(){this.tempProduct={},this.imageUrl="",this.disabled=!1,this.fileData="",this.$emit("emit-hideModal"),this.modal.hide()}}},z="https://ec-course-api.hexschool.io/",G="bftsai";Te("required",Ue);Ae({validateOnInput:!0,generateMessage:Ce({zhTW:Se})});Me("zhTW");const ot={data(){return{tempProduct:{},imageUrl:"",disabled:!1,fileData:""}},mixins:[ae],props:{productModal:{typeof:Object,default(){return{}}}},components:{VForm:De,VField:Ne,ErrorMessage:Le},watch:{imageUrl(){this.imageUrl?this.disabled=!0:this.disabled=!1},productModal(){this.tempProduct={...this.productModal}}},methods:{throttle(o){let t,s;return(...a)=>{s=a,!t&&(o(s),s=null,t=setTimeout(()=>{t=null,s&&(o(s),s=null)},1e3))}},onSubmit(){this.tempProduct.imageUrl&&(this.disabled?this.tempProduct.is_enabled=0:this.tempProduct.is_enabled=1,this.tempProduct.id?this.putProduct({data:this.tempProduct}):this.postProduct({data:this.tempProduct}))},async postProduct(o){try{this.$emit("emit-toggleLoading");const t=(await this.axios.post(`${z}v2/api/${G}/admin/product`,o)).data;if(this.$emit("emit-toggleLoading"),t.success){const s={icon:"success",title:t.message,timer:1500};this.$swal(s),this.hideModal(),this.$emit("emit-getProducts")}else{const s={icon:"error",title:t.message};this.$swal(s)}}catch{}},async putProduct(o){try{this.$emit("emit-toggleLoading");const t=await this.axios.put(`${z}/v2/api/${G}/admin/product/${this.tempProduct.id}`,o);if(this.$emit("emit-toggleLoading"),t.data.success){const s={icon:"success",title:t.data.message,timer:1500};this.$swal(s),this.hideModal(),this.tempProduct={},this.$emit("emit-getProducts")}else{const s={icon:"error",title:t.data.message};this.$swal(s)}}catch{}},async loadFile(o){try{const t=o.target.files[0],s=new FormData;s.append("file-to-upload",t);const a=await this.axios.post(`${z}/v2/api/${G}/admin/upload`,s);this.imageUrl=a.data.imageUrl}catch{}},deleteImageUrl(){this.imageUrl="",this.fileData=""},deleteTempImage(o){if(o.target.previousElementSibling.alt.includes("imageUrl"))this.tempProduct.imageUrl="";else{const t=Number(o.target.previousElementSibling.alt.split("imagesUrl")[1]);this.tempProduct.imagesUrl.splice(t,1)}},addProductImage(){this.imageUrl&&(this.tempProduct.imageUrl?this.tempProduct.imagesUrl.push(this.imageUrl):this.tempProduct.imageUrl=this.imageUrl,this.imageUrl="")}}},lt={class:"modal fade",id:"exampleModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},nt={class:"modal-dialog modal-xl"},at={class:"modal-header"},ct=e("h5",{class:"modal-title fs-5",id:"exampleModalLabel"},"Edit Product",-1),rt={class:"modal-body"},dt={class:"row"},mt={class:"col-4"},ut={class:"row"},ht={class:"col-12 mb-3 d-flex flex-column"},_t=e("span",{class:"invalid-feedback",name:"imageUrl"},"請輸入主圖照片",-1),gt=["disabled"],pt={key:0,class:"col-12 mb-3 position-relative"},ft=["src"],bt=e("span",{class:"visually-hidden"},"unread messages",-1),vt={class:"row"},Et={key:0,class:"col-6 position-relative mb-3"},yt=["src"],Pt=e("span",{class:"visually-hidden"},"unread messages",-1),wt=["src","alt"],xt=e("span",{class:"visually-hidden"},"unread messages",-1),kt={class:"col-8"},Tt={class:"mb-3 d-flex align-items-center"},At=e("label",{for:"title",class:"form-label"},"Title：",-1),Ct={class:"w-100 d-flex flex-column"},Mt={class:"row"},St={class:"col-6"},Dt={class:"mb-3 d-flex align-items-center"},Nt=e("label",{for:"category",class:"form-label"},"Category：",-1),Lt={class:"w-100 d-flex flex-column"},Ut={class:"col-6"},Ot={class:"mb-3 d-flex align-items-center"},Vt=e("label",{for:"unit",class:"form-label"},"Unit：",-1),$t={class:"w-100 d-flex flex-column"},It={class:"row"},Ft={class:"col-6"},qt={class:"mb-3 d-flex align-items-center"},Bt=e("label",{for:"origin_price",class:"form-label"},"Origin_price：",-1),Rt={class:"w-100 d-flex flex-column"},jt={class:"col-6"},Wt={class:"mb-3 d-flex align-items-center"},Yt=e("label",{for:"price",class:"form-label"},"Price：",-1),Kt={class:"w-100 d-flex flex-column"},zt={class:"mb-3 d-flex align-items-center"},Gt=e("label",{for:"num",class:"form-label"},"Number：",-1),Jt={class:"w-100 d-flex flex-column"},Qt={class:"mb-3 d-flex align-items-center"},Xt=e("label",{for:"content",class:"form-label"},"Content：",-1),Zt={class:"w-100 d-flex flex-column"},Ht={class:"mb-3"},es=e("label",{for:"description",class:"form-label"},"Description：",-1),ts={class:"w-100"},ss={class:"mb-3 d-flex align-items-center"},is=["checked"],os=e("label",{for:"is_enabled",class:"form-check-label"},"啟用",-1),ls={class:"modal-footer"},ns=e("button",{type:"submit",class:"btn btn-primary"},"Save changes",-1);function as(o,t,s,a,i,n){const d=M("v-field"),r=M("error-message"),g=M("v-form");return v(),y("div",lt,[e("div",nt,[f(g,{class:"modal-content",onSubmit:n.onSubmit},{default:Z(({errors:p})=>[e("div",at,[ct,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...l)=>o.hideModal&&o.hideModal(...l))})]),e("div",rt,[e("div",dt,[e("div",mt,[e("div",ut,[e("div",ht,[i.imageUrl?I("",!0):j((v(),y("input",{key:0,type:"text",placeholder:"請輸入圖片網址",name:"imageUrl",class:_(["form-control",{"is-invalid":!i.tempProduct.imageUrl}]),"onUpdate:modelValue":t[1]||(t[1]=l=>i.imageUrl=l)},null,2)),[[H,i.imageUrl]]),_t,e("input",{type:"file",disabled:i.disabled,onChange:t[2]||(t[2]=(...l)=>n.loadFile&&n.loadFile(...l))},null,40,gt),e("button",{type:"button",class:"btn btn-primary me-3",onClick:t[3]||(t[3]=(...l)=>n.addProductImage&&n.addProductImage(...l))},"新增")]),i.imageUrl?(v(),y("div",pt,[e("img",{src:i.imageUrl,alt:"edit product pic",class:"object-fit-cover w-100"},null,8,ft),e("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:t[4]||(t[4]=(...l)=>n.deleteImageUrl&&n.deleteImageUrl(...l))},[D(" - "),bt])])):I("",!0)]),e("div",vt,[i.tempProduct.imageUrl?(v(),y("div",Et,[e("img",{src:i.tempProduct.imageUrl,alt:"'imageUrl'",class:"object-fit-cover w-100"},null,8,yt),e("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:t[5]||(t[5]=(...l)=>n.deleteTempImage&&n.deleteTempImage(...l))},[D(" - "),Pt])])):I("",!0),(v(!0),y(U,null,O(i.tempProduct.imagesUrl,(l,u)=>(v(),y("div",{class:"col-6 position-relative mb-3",key:"key"+u},[e("img",{src:l,alt:"imagesUrl"+u,class:"object-fit-cover w-100"},null,8,wt),e("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:t[6]||(t[6]=(...c)=>n.deleteTempImage&&n.deleteTempImage(...c))},[D(" - "),xt])]))),128))])]),e("div",kt,[e("div",Tt,[At,e("div",Ct,[f(d,{type:"text",id:"title",class:_(["form-control",{"is-invalid":p.Title}]),name:"Title",modelValue:i.tempProduct.title,"onUpdate:modelValue":t[7]||(t[7]=l=>i.tempProduct.title=l),rules:"required"},null,8,["class","modelValue"]),f(r,{class:"invalid-feedback",name:"Title"})])]),e("div",Mt,[e("div",St,[e("div",Dt,[Nt,e("div",Lt,[f(d,{type:"text",id:"category",class:_(["form-control",{"is-invalid":p.Category}]),name:"Category",modelValue:i.tempProduct.category,"onUpdate:modelValue":t[8]||(t[8]=l=>i.tempProduct.category=l),rules:"required"},null,8,["class","modelValue"]),f(r,{class:"invalid-feedback",name:"Category"})])])]),e("div",Ut,[e("div",Ot,[Vt,e("div",$t,[f(d,{type:"text",id:"unit",class:_(["form-control",{"is-invalid":p.Unit}]),name:"Unit",modelValue:i.tempProduct.unit,"onUpdate:modelValue":t[9]||(t[9]=l=>i.tempProduct.unit=l),rules:"required"},null,8,["class","modelValue"]),f(r,{class:"invalid-feedback",name:"Unit"})])])])]),e("div",It,[e("div",Ft,[e("div",qt,[Bt,e("div",Rt,[f(d,{type:"number",id:"origin_price",class:_(["form-control",{"is-invalid":p.Origin_price}]),name:"Origin_price",modelValue:i.tempProduct.origin_price,"onUpdate:modelValue":t[10]||(t[10]=l=>i.tempProduct.origin_price=l),rules:"required"},null,8,["class","modelValue"]),f(r,{class:"invalid-feedback",name:"Origin_price"})])])]),e("div",jt,[e("div",Wt,[Yt,e("div",Kt,[f(d,{type:"number",id:"price",class:_(["form-control",{"is-invalid":p.Price}]),name:"Price",modelValue:i.tempProduct.price,"onUpdate:modelValue":t[11]||(t[11]=l=>i.tempProduct.price=l),rules:"required"},null,8,["class","modelValue"]),f(r,{class:"invalid-feedback",name:"Price"})])])])]),e("div",zt,[Gt,e("div",Jt,[f(d,{type:"number",id:"num",class:_(["form-control",{"is-invalid":p.Number}]),name:"Number",modelValue:i.tempProduct.num,"onUpdate:modelValue":t[12]||(t[12]=l=>i.tempProduct.num=l),rules:"required"},null,8,["class","modelValue"]),f(r,{class:"invalid-feedback",name:"Number"})])]),e("div",Qt,[Xt,e("div",Zt,[f(d,{type:"text",id:"content",class:_(["form-control",{"is-invalid":p.Content}]),name:"Content",modelValue:i.tempProduct.content,"onUpdate:modelValue":t[13]||(t[13]=l=>i.tempProduct.content=l),rules:"required"},null,8,["class","modelValue"]),f(r,{class:"invalid-feedback",name:"Content"})])]),e("div",Ht,[es,e("div",ts,[f(d,{name:"Description",rules:"required",modelValue:i.tempProduct.description,"onUpdate:modelValue":t[15]||(t[15]=l=>i.tempProduct.description=l)},{default:Z(()=>[j(e("textarea",{name:"Description",class:_(["w-100",{"is-invalid":p.Description}]),id:"description",cols:"30",rows:"3",placeholder:"請輸入產品描述","onUpdate:modelValue":t[14]||(t[14]=l=>i.tempProduct.description=l)},null,2),[[H,i.tempProduct.description]]),f(r,{name:"Description",class:"invalid-feedback"})]),_:2},1032,["modelValue"])])]),e("div",ss,[j(e("input",{type:"checkbox",id:"is_enabled",class:"form-check-input me-2",checked:i.tempProduct.is_enabled,"onUpdate:modelValue":t[16]||(t[16]=l=>i.tempProduct.is_enabled=l)},null,8,is),[[xe,i.tempProduct.is_enabled]]),os])])])]),e("div",ls,[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[17]||(t[17]=(...l)=>o.hideModal&&o.hideModal(...l))},"Close"),ns])]),_:1},8,["onSubmit"])])],512)}const cs=L(ot,[["render",as]]),rs="https://ec-course-api.hexschool.io/",ds="bftsai",ms={data(){return{tempProduct:{}}},props:{deleteModal:{typeof:Object,default(){return{}}}},mixins:[ae],watch:{deleteModal(){this.tempProduct={...this.deleteModal}}},methods:{async deleteProduct(){try{const{id:o}=this.tempProduct;this.$emit("emit-toggleLoading");const t=(await this.axios.delete(`${rs}/v2/api/${ds}/admin/product/${o}`)).data;if(this.$emit("emit-toggleLoading"),t.success){const s={icon:"success",title:t.message,timer:1500};this.$swal(s),this.hideModal(),this.tempProduct={},this.$emit("emit-getProducts")}else{const s={icon:"error",title:t.message};this.$swal(s)}}catch(o){console.log(o)}}}},us={class:"modal fade",id:"exampleModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},hs={class:"modal-dialog modal-xl"},_s={class:"modal-content"},gs={class:"modal-header"},ps=e("h5",{class:"modal-title fs-5",id:"exampleModalLabel"},"Delete Product",-1),fs={class:"modal-body"},bs={class:"row"},vs={class:"col-4"},Es={class:"row"},ys={class:"col-12 mb-3 d-flex flex-wrap justify-content-between"},Ps=["src"],ws=["src"],xs={class:"col-8"},ks={class:"mb-3 d-flex align-items-center"},Ts={class:"row"},As={class:"col-6"},Cs={class:"mb-3 d-flex align-items-center"},Ms={class:"col-6"},Ss={class:"mb-3 d-flex align-items-center"},Ds={class:"row"},Ns={class:"col-6"},Ls={class:"mb-3 d-flex align-items-center"},Us={class:"col-6"},Os={class:"mb-3 d-flex align-items-center"},Vs={class:"mb-3 d-flex align-items-center"},$s={class:"mb-3"},Is={class:"w-100"},Fs={class:"mb-3 d-flex align-items-center"},qs={class:"modal-footer"};function Bs(o,t,s,a,i,n){return v(),y("div",us,[e("div",hs,[e("div",_s,[e("div",gs,[ps,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...d)=>o.hideModal&&o.hideModal(...d))})]),e("div",fs,[e("div",bs,[e("div",vs,[e("div",Es,[e("div",ys,[e("img",{class:"object-fit-cover w-50 mb-3",src:i.tempProduct.imageUrl,alt:"imageUrl"},null,8,Ps),(v(!0),y(U,null,O(i.tempProduct.imagesUrl,(d,r)=>(v(),y("img",{class:"object-fit-cover w-50 mb-3",src:d,alt:"'imagesUrl' + key",key:"imagesUrl"+r},null,8,ws))),128))])])]),e("div",xs,[e("div",ks,[e("p",null,"Title："+b(i.tempProduct.title),1)]),e("div",Ts,[e("div",As,[e("div",Cs,[e("p",null,"Category："+b(i.tempProduct.category),1)])]),e("div",Ms,[e("div",Ss,[e("p",null,"Unit："+b(i.tempProduct.unit),1)])])]),e("div",Ds,[e("div",Ns,[e("div",Ls,[e("p",null,"origin_price："+b(i.tempProduct.origin_price),1)])]),e("div",Us,[e("div",Os,[e("p",null,"Price："+b(i.tempProduct.price),1)])])]),e("div",Vs,[e("p",null,"Content："+b(i.tempProduct.content),1)]),e("div",$s,[e("div",Is,[e("p",null,"Description："+b(i.tempProduct.description),1)])]),e("div",Fs,[e("p",{class:_(["text-success",{"text-danger":!i.tempProduct.is_enabled}])},b(i.tempProduct.is_enabled?"啟用":"未啟用"),3)])])])]),e("div",qs,[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...d)=>o.hideModal&&o.hideModal(...d))},"Close"),e("button",{type:"submit",class:"btn btn-outline-danger",onClick:t[2]||(t[2]=(...d)=>n.deleteProduct&&n.deleteProduct(...d))},"Delete Product")])])])],512)}const Rs=L(ms,[["render",Bs]]),J="https://ec-course-api.hexschool.io/",oe="bftsai",js={data(){return{products:[],paginationObj:{},itemSelect:{},productsNum:0}},components:{ProductCard:ze,pagination:Xe,productModal:cs,deleteModal:Rs},props:["defaultTheme"],methods:{textDanger(o){return!o&&this.defaultTheme==="light"},textLight(o){return!o&&this.defaultTheme==="dark"},async getAllProducts(){try{const o=(await this.axios.get(`${J}v2/api/${oe}/admin/products/all`)).data.products;this.productsNum=Object.keys(o)}catch{}},async getProducts(o=1){try{this.itemSelect={},this.product=[],this.$emit("emit-toggleLoading");const t=(await this.axios.get(`${J}v2/api/${oe}/admin/products?page=${o}`)).data;this.products=t.products,this.paginationObj=t.pagination,this.$emit("emit-toggleLoading");const s={icon:"success",title:"已取得產品資料",timer:1500};this.$swal(s)}catch(t){this.$emit("emit-toggleLoading");const s={icon:"error",title:t.response.data.message};this.$swal(s)}},checkProduct(o){this.itemSelect=JSON.parse(JSON.stringify(o))},async checkLogin(){try{this.$emit("emit-toggleLoading");const o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=o;const t=(await this.axios.post(`${J}v2/api/user/check`)).data;t.success&&(this.$emit("emit-toggleLogin",t.success),this.getProducts(1)),this.$emit("emit-toggleLoading")}catch(o){this.$emit("emit-toggleLogin",o.response.data.success);const t={icon:"error",title:o.response.data.message,timer:1500};this.$swal(t),this.$emit("emit-toggleLoading"),o.response.data.success||this.$router.push("login")}},selectPage(o){this.getProducts(o)},productModal(o){o.id?this.itemSelect={...o}:this.itemSelect={imagesUrl:[]},this.$refs.productModal.showModal()},deleteProduct(o){this.itemSelect={...o},this.$refs.deleteModal.showModal()},hideModal(){this.itemSelect={}},toggleLoading(){this.$emit("emit-toggleLoading")}},mounted(){this.$emit("emit-login"),this.checkLogin(),this.getAllProducts()}},Ws={class:"container"},Ys={class:"row"},Ks={class:"col-lg-8"},zs=e("h1",null,"Products List",-1),Gs={class:"table table-hover"},Js=e("thead",null,[e("tr",{class:"text-center"},[e("th",{class:"w-50",scope:"col"},"產品名稱"),e("th",{scope:"col"},"原價"),e("th",{scope:"col"},"售價"),e("th",{scope:"col"},"是否啟用"),e("th",{scope:"col"},"查看細節"),e("th",{scope:"col"},"編輯")])],-1),Qs={class:"w-50 text-start"},Xs=["onClick"],Zs={colspan:"2"},Hs=["onClick"],ei=["onClick"];function ti(o,t,s,a,i,n){const d=M("productModal"),r=M("deleteModal"),g=M("pagination"),p=M("ProductCard");return v(),y("div",Ws,[e("div",Ys,[e("div",Ks,[f(d,{ref:"productModal","product-modal":i.itemSelect,"emit-hide-modal":n.hideModal,onEmitGetProducts:n.getProducts,onEmitToggleLoading:n.toggleLoading},null,8,["product-modal","emit-hide-modal","onEmitGetProducts","onEmitToggleLoading"]),f(r,{ref:"deleteModal","delete-modal":i.itemSelect,onEmitHideModal:n.hideModal,onEmitGetProducts:n.getProducts,onEmitToggleLoading:n.toggleLoading},null,8,["delete-modal","onEmitHideModal","onEmitGetProducts","onEmitToggleLoading"]),zs,e("button",{class:_(["btn d-block ms-auto",{"btn-secondary":s.defaultTheme==="light","btn-outline-primary":s.defaultTheme==="dark"}]),onClick:t[0]||(t[0]=(...l)=>n.productModal&&n.productModal(...l))},"建立新產品",2),e("table",Gs,[Js,e("tbody",null,[(v(!0),y(U,null,O(i.products,l=>(v(),y("tr",{key:l.title,class:"text-center"},[e("td",Qs,b(l.title),1),e("td",null,b(l.origin_price),1),e("td",null,b(l.price),1),e("td",{class:_({"text-danger":n.textDanger(l.is_enabled),"text-light":n.textLight(l.is_enabled)})},b(l.is_enabled?"啟用":"未啟用"),3),e("td",null,[e("button",{type:"button",class:_(["btn w-100 p-1",{"btn-secondary":s.defaultTheme==="light","btn-outline-primary":s.defaultTheme==="dark"}]),onClick:u=>n.checkProduct(l)},"查看細節",10,Xs)]),e("td",Zs,[e("button",{type:"button",class:_(["btn p-1 me-3",{"btn-secondary":s.defaultTheme==="light","btn-outline-primary":s.defaultTheme==="dark"}]),onClick:u=>n.productModal(l)},"編輯",10,Hs),e("button",{type:"button",class:_(["btn p-1 btn-outline-danger",{"text-primary":s.defaultTheme==="dark"}]),onClick:u=>n.deleteProduct(l)},"刪除",10,ei)])]))),128))])]),f(g,{"pagination-obj":i.paginationObj,onEmitSelectPage:n.selectPage},null,8,["pagination-obj","onEmitSelectPage"])]),i.itemSelect.id?(v(),ke(p,{key:0,"item-select":i.itemSelect,"default-theme":s.defaultTheme},null,8,["item-select","default-theme"])):I("",!0)])])}const oi=L(js,[["render",ti]]);export{oi as default};
